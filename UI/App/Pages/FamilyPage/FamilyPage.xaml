<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="GT4.UI.App.Pages.FamilyPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:components="clr-namespace:GT4.UI.App.Components"
    xmlns:items="clr-namespace:GT4.UI.App.Items"
    xmlns:resources="clr-namespace:GT4.UI.Resources;assembly=GT4.UI.Resources"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2021/maui/toolkit"
    x:Name="Root">

  <ContentPage.Resources>
    <ResourceDictionary />
  </ContentPage.Resources>

  <Grid
      ColumnDefinitions="*"
      RowDefinitions="Auto, *">

    <components:TitleWithAdornersView
        Grid.Row="0"
        Grid.Column="0"
        DeleteAdornerCommand="{Binding DeleteFamilyCommand, Source={x:Reference Root}}"
        EditAdornerCommand="{Binding EditFamilyCommand, Source={x:Reference Root}}"
        HorizontalOptions="Fill"
        SubtitleText="{x:Static resources:UIStrings.WndHintFamilyPage}"
        TitleText="{Binding FamilyName.Value, Source={x:Reference Root}}"
        VerticalOptions="Start" />

    <ScrollView
        Grid.Row="1"
        Grid.Column="0">

      <FlexLayout
          AlignContent="Center"
          AlignItems="Start"
          BindableLayout.ItemsSource="{Binding Members, Source={x:Reference Root}}"
          Direction="Row"
          JustifyContent="SpaceAround"
          Style="{x:StaticResource PageContentIndentation}"
          Wrap="Wrap">

        <BindableLayout.ItemTemplate>
          <DataTemplate x:DataType="items:PersonInfoItem">
            <Frame
                Margin="1"
                CornerRadius="10"
                HasShadow="True"
                MinimumWidthRequest="{Binding Path=PersonItemMinimalWidth, Source={RelativeSource AncestorType={x:Type ContentPage}}}">

              <Frame.GestureRecognizers>
                <TapGestureRecognizer
                    Command="{Binding Path=MemberItemTappedCommand, Source={RelativeSource AncestorType={x:Type ContentPage}}}"
                    CommandParameter="{Binding .}" />
              </Frame.GestureRecognizers>

              <components:PersonInfoView
                  DatesLabelStyle="{StaticResource FieldValue}"
                  NameLabelStyle="{StaticResource FieldName}"
                  Person="{Binding Info}" />
            </Frame>
          </DataTemplate>
        </BindableLayout.ItemTemplate>
      </FlexLayout>

    </ScrollView>
  </Grid>
</ContentPage>