<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
						 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
						 x:Class="GT4.UI.App.Dialogs.CreateNewPersonDialog"
             xmlns:components="clr-namespace:GT4.UI.App.Components"
             xmlns:resources="clr-namespace:GT4.UI.Resources;assembly=GT4.UI.Resources"
						 Title="NewPage1">
  <ContentPage.Resources>
    <ResourceDictionary>

      <OnIdiom 
        x:Key="PhotoHeight" 
        x:TypeArguments="x:Double"
        Phone="100" 
        Tablet="140" 
        Desktop="300" />
      <OnIdiom 
        x:Key="PhotoWidth"  
        x:TypeArguments="x:Double"
        Phone="100" 
        Tablet="140" 
        Desktop="300" />

      <Style x:Key="PhotoThumbStyle" TargetType="Image">
        <Setter Property="Aspect" Value="AspectFit" />
        <Setter Property="HeightRequest" Value="{StaticResource PhotoHeight}" />
        <Setter Property="WidthRequest"  Value="{StaticResource PhotoWidth}" />
        <Setter Property="HorizontalOptions" Value="Center" />
        <Setter Property="VerticalOptions"   Value="Center" />
      </Style>

      <Style x:Key="CardFrameStyle" TargetType="Frame">
        <Setter Property="CornerRadius" Value="10" />
        <Setter Property="HorizontalOptions" Value="Fill" />
      </Style>

      <Style x:Key="CardFrameTitle" TargetType="Label">
        <Setter Property="FontSize" Value="Title" />
        <Setter Property="FontAttributes" Value="Bold" />
      </Style>

    </ResourceDictionary>
  </ContentPage.Resources>

  <ScrollView>
    <VerticalStackLayout 
					Spacing="20" 
					Padding="20">

      <Frame 
					Style="{StaticResource CardFrameStyle}">

        <Grid 
          RowDefinitions="Auto, *"
          ColumnDefinitions="*, Auto">
          <Label
            Grid.Row="0"
            Grid.Column="0"
            Style="{StaticResource CardFrameTitle}"
            Text="Pictures" />
          <CollectionView 
            Grid.Row="1"
            Grid.Column="0"
						ItemsSource="{Binding Photos}" 
						SelectionMode="Single" 
            HorizontalScrollBarVisibility="Always">

            <CollectionView.ItemsLayout>
              <LinearItemsLayout 
										Orientation="Horizontal" 
										ItemSpacing="10" />
            </CollectionView.ItemsLayout>

            <CollectionView.ItemTemplate>
              <DataTemplate>
                <Image 
                    Source="{Binding .}"
									  Style="{StaticResource PhotoThumbStyle}"/>
              </DataTemplate>
            </CollectionView.ItemTemplate>
          </CollectionView>
          <Button 
              Grid.Row="1"
              Grid.Column="1"
							Text="Add Photo" 
							Command="{Binding AddPhotoCommand}" 
							StyleClass="Secondary" />

        </Grid>
      </Frame>

      <Frame 
          Style="{StaticResource CardFrameStyle}">
        <Grid  
            ColumnDefinitions="Auto, *" 
            RowDefinitions="Auto, *, Auto">

          <Label
              Grid.Column="0"
              Grid.Row="0"
              Style="{StaticResource CardFrameTitle}"
              Text="Names" />

          <CollectionView 
              Grid.Column="1"
              Grid.Row="1"
              ItemsSource="{Binding Names}" 
              SelectionMode="Single" 
              HorizontalOptions="Center">

            <CollectionView.ItemsLayout>
              <LinearItemsLayout 
									Orientation="Vertical" />
            </CollectionView.ItemsLayout>

            <CollectionView.ItemTemplate>
              <DataTemplate>
                <Label 
                    Padding="15"
                    Text="{Binding Value}" 
                    FontSize="Medium"
                    HorizontalTextAlignment="Start"
                    VerticalTextAlignment="Center"
                    HorizontalOptions="Fill"/>
              </DataTemplate>
            </CollectionView.ItemTemplate>
          </CollectionView>

          <Button 
              Grid.Column="0"
              Grid.Row="2"
              Grid.ColumnSpan="2"
				      Text="Add Name" 
				      Command="{Binding AddNameCommand}" 
				      StyleClass="Secondary" 
              HorizontalOptions="Fill"/>
        </Grid>
      </Frame>

      <Frame 
          Style="{StaticResource CardFrameStyle}">
        <Grid  
            ColumnDefinitions="Auto, *"
            RowDefinitions="Auto, Auto, Auto" >

          <Label
              Grid.Column="0"
              Grid.Row="0"
              Style="{StaticResource CardFrameTitle}"
              Text="Dates" />

          <components:DateInfoView
              Grid.Column="1"
              Grid.Row="1"
              Caption="{x:Static resources:UIStrings.FieldDateOfBirth}"
              Date="{Binding BirthDate}" />

          <components:DateInfoView
              Grid.Column="1"
              Grid.Row="2"
              Caption="{x:Static resources:UIStrings.FieldDateOfDeath}"
              Date="{Binding DeathDate}" />

        </Grid>
      </Frame>

      <Frame 
          Style="{StaticResource CardFrameStyle}">

        <Grid  
            ColumnDefinitions="Auto"
            RowDefinitions="Auto, Auto, Auto" >

          <Label
              Grid.Column="0"
              Grid.Row="0"
              Style="{StaticResource CardFrameTitle}"
              Text="Relationships" />
        </Grid>

      </Frame>

      <Frame 
          Style="{StaticResource CardFrameStyle}">

        <Grid  
            ColumnDefinitions="Auto"
            RowDefinitions="Auto, Auto, Auto" >

          <Label
              Grid.Column="0"
              Grid.Row="0"
              Style="{StaticResource CardFrameTitle}"
              Text="Biography" />

          <Editor 
            Grid.Column="0"
            Grid.Row="1"
            Placeholder="Enter a biography or life story..."
						HeightRequest="200"
						Text="{Binding Biography}" />
        </Grid>

      </Frame>

      <Button Text="{Binding CreatePersonBtnName}" Command="{Binding SavePersonCommand}" StyleClass="Primary" />

    </VerticalStackLayout>
  </ScrollView>
</ContentPage>